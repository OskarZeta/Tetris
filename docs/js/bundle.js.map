{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/globals.js","webpack:///./js/figures/figure.js","webpack:///./js/figures/Z.js","webpack:///./js/figures/index.js","webpack:///./js/figures/I.js","webpack:///./js/figures/J.js","webpack:///./js/figures/L.js","webpack:///./js/figures/O.js","webpack:///./js/figures/S.js","webpack:///./js/figures/T.js","webpack:///./js/utils.js","webpack:///./js/render.js","webpack:///./js/grid.js","webpack:///./js/event_handlers.js","webpack:///./js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","gameWidth","gameHeight","nextFieldHeight","nextFieldWidth","movementSpeeds","loopRate","figureTypes","scores","levelingUpBase","levelsLimit","score","level","gameState","pause","Figure","constructor","type","this","stop","startPos","currentFrame","className","coordinates","array","move","dir","setCoordinates","getCoordinates","map","pair","row","col","stopMoving","Figure_Z","super","defaultFrame","changeFrame","getFrame1Coords","oldCoords","getFrame2Coords","rotate","test","coords","getFrame3Coords","getFrame4Coords","pickRandomFigure","figureClasses","Math","floor","random","length","setCellProps","modifiers","renderCell","cellEl","document","createElement","classList","add","renderRow","rowEl","cell","appendChild","renderGame","gameEl","getElementById","clearElement","renderScore","innerHTML","renderLevel","element","generateInitialCells","height","width","j","push","updateCells","grid","rerender","forEach","checkBottomCells","range","bottomRow","max","apply","Set","some","filter","Boolean","checkLeftCells","leftColumn","min","undefined","checkRightCells","rightColumn","clearLines","linesToClear","every","sort","a","b","rows","splice","deleteRows","number","blankRow","Array","fill","unshift","slice","addEmptyRows","userActions","event","figure","keyCode","moveFigure","nextCoords","topRow","checkTopCells","rotateFigure","globalActions","fn","delay","timerId","args","clearTimeout","setTimeout","debounce","code","renderPause","loadGameState","spawnFigure","FigureClass","showNextFigure","nextEl","renderNextFigure","gameLoop","nextFigure","initGame","gameGrid","addEventListener","endGame","confirm","setLevel","figureLoop","speed","interval","setInterval","clearInterval","listenerWrapper","e","checkSpawnCells","removeEventListener","state","saveGameState"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export let gameWidth = 10;\r\nexport let gameHeight = 20; \r\nexport let nextFieldHeight = 4;\r\nexport let nextFieldWidth = 9;\r\nexport let movementSpeeds = [ 700, 500, 450, 350, 300, 250, 200, 150, 100, 50 ];\r\nexport let loopRate = 400;\r\nexport const figureTypes = ['I', 'J', 'L', 'O', 'S', 'T', 'Z'];\r\nexport const scores = [100, 300, 700, 1500];\r\nexport const levelingUpBase = 1000;\r\nexport const levelsLimit = 10;\r\nexport let score = 0;\r\nexport let level = 1;\r\nexport let gameState = {};\r\nexport let pause = false;\r\n\r\nexport function addScore(value) {\r\n  score += value;\r\n}\r\nexport function setScore(value) {\r\n  score = value;\r\n}\r\nexport function increaseLevel() {\r\n  if (level < levelsLimit) level++;\r\n}\r\nexport function setLevel(value) {\r\n  level = value;\r\n}\r\nexport function setPause(value) {\r\n  pause = value;\r\n}\r\nexport function saveGameState(state) {\r\n  gameState = state;\r\n}","import { gameWidth } from '../globals.js';\r\n\r\nclass Figure {\r\n  constructor (type) {\r\n    this.type = type;\r\n    this.stop = false;\r\n    this.startPos = gameWidth/2;\r\n    this.currentFrame = 1;\r\n    this.className = 'cell--' + this.type;\r\n  }\r\n  get getCoordinates() {\r\n    return this.coordinates;\r\n  }\r\n  set setCoordinates(array) {\r\n    this.coordinates = array;\r\n  }\r\n  move(dir) {\r\n    switch(dir) {\r\n      case 'UP' : {\r\n        this.setCoordinates = this.getCoordinates.map(pair => ({\r\n          row: pair.row - 1,\r\n          col: pair.col\r\n        }));\r\n        break;\r\n      }\r\n      case 'LEFT' : {\r\n        this.setCoordinates = this.getCoordinates.map(pair => ({\r\n          row: pair.row,\r\n          col: pair.col - 1 \r\n        }));\r\n        break;\r\n      }\r\n      case 'RIGHT' : {\r\n        this.setCoordinates = this.getCoordinates.map(pair => ({\r\n          row: pair.row,\r\n          col: pair.col + 1 \r\n        }));\r\n        break;\r\n      }\r\n      case 'DOWN' :\r\n      default : {\r\n        this.setCoordinates = this.getCoordinates.map(pair => ({\r\n          row: pair.row + 1,\r\n          col: pair.col\r\n        }));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  stopMoving() {\r\n    this.stop = true;\r\n  }\r\n}\r\n\r\nexport default Figure;\r\n","import Figure from './figure';\r\nimport { figureTypes } from '../globals';\r\n\r\nclass Figure_Z extends Figure {\r\n  constructor() {\r\n    super(figureTypes[6]);\r\n    this.defaultFrame = [\r\n      { row: 0, col: this.startPos - 1 },\r\n      { row: 0, col: this.startPos },\r\n      { row: 1, col: this.startPos },\r\n      { row: 1, col: this.startPos + 1 }\r\n    ];\r\n    this.setCoordinates = this.defaultFrame;\r\n  }\r\n  changeFrame() {\r\n    this.currentFrame === 2 ?\r\n      this.currentFrame = 1 :\r\n      this.currentFrame++;\r\n  }\r\n  getFrame1Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row - 2, col: oldCoords[0].col },\r\n      { row: oldCoords[1].row - 1, col: oldCoords[1].col + 1 },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row + 1, col: oldCoords[3].col + 1 }\r\n    ];\r\n  }\r\n  getFrame2Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row + 2, col: oldCoords[0].col },\r\n      { row: oldCoords[1].row + 1, col: oldCoords[1].col - 1 },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row - 1, col: oldCoords[3].col - 1 }\r\n    ];\r\n  }\r\n  rotate(test) {\r\n    const frame = this.currentFrame;\r\n    let coords = [];\r\n    switch(frame) {\r\n      case 1 : {\r\n        coords = this.getFrame2Coords();\r\n        break;\r\n      }\r\n      case 2 : {\r\n        coords = this.getFrame1Coords();\r\n        break;\r\n      }\r\n      default : {\r\n        coords = this.defaultFrame;\r\n      }\r\n    } \r\n    if (test) return coords;\r\n    this.changeFrame();\r\n    this.setCoordinates = coords;\r\n  }\r\n} \r\n\r\nexport default Figure_Z;","import Figure_I from './I.js';\r\nimport Figure_J from './J.js';\r\nimport Figure_L from './L.js';\r\nimport Figure_O from './O.js';\r\nimport Figure_S from './S.js';\r\nimport Figure_T from './T.js';\r\nimport Figure_Z from './Z.js';\r\n\r\nexport default [Figure_I, Figure_J, Figure_L, Figure_O, Figure_S, Figure_T, Figure_Z];","import Figure from './figure';\r\nimport { figureTypes } from '../globals';\r\n\r\nclass Figure_I extends Figure {\r\n  constructor() {\r\n    super(figureTypes[0]);\r\n    this.defaultFrame = [\r\n      { row: 0, col: this.startPos - 2 },\r\n      { row: 0, col: this.startPos - 1 },\r\n      { row: 0, col: this.startPos },\r\n      { row: 0, col: this.startPos + 1 }\r\n    ];\r\n    this.setCoordinates = this.defaultFrame;\r\n  }\r\n  changeFrame() {\r\n    this.currentFrame === 2 ?\r\n      this.currentFrame = 1 :\r\n      this.currentFrame++;\r\n  }\r\n  getFrame1Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row + 1, col: oldCoords[0].col - 1 },\r\n      { row: oldCoords[1].row, col: oldCoords[1].col },\r\n      { row: oldCoords[2].row - 1, col: oldCoords[2].col + 1 },\r\n      { row: oldCoords[3].row - 2, col: oldCoords[3].col + 2 }\r\n    ];\r\n  }\r\n  getFrame2Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row - 1, col: oldCoords[0].col + 1 },\r\n      { row: oldCoords[1].row, col: oldCoords[1].col },\r\n      { row: oldCoords[2].row + 1, col: oldCoords[2].col - 1 },\r\n      { row: oldCoords[3].row + 2, col: oldCoords[3].col - 2 }\r\n    ];\r\n  }\r\n  rotate(test) {\r\n    const frame = this.currentFrame;\r\n    let coords = [];\r\n    switch(frame) {\r\n      case 1 : {\r\n        coords = this.getFrame2Coords();\r\n        break;\r\n      }\r\n      case 2 : {\r\n        coords = this.getFrame1Coords();\r\n        break;\r\n      }\r\n      default : {\r\n        coords = this.defaultFrame;\r\n      }\r\n    } \r\n    if (test) return coords;\r\n    this.changeFrame();\r\n    this.setCoordinates = coords;\r\n  }\r\n} \r\n\r\nexport default Figure_I;","import Figure from './figure';\r\nimport { figureTypes } from '../globals';\r\n\r\nclass Figure_J extends Figure {\r\n  constructor() {\r\n    super(figureTypes[1]);\r\n    this.defaultFrame = [\r\n      { row: 0, col: this.startPos - 1 },\r\n      { row: 1, col: this.startPos - 1 },\r\n      { row: 1, col: this.startPos },\r\n      { row: 1, col: this.startPos + 1 }\r\n    ];\r\n    this.setCoordinates = this.defaultFrame;\r\n  }\r\n  changeFrame() {\r\n    this.currentFrame === 4 ?\r\n      this.currentFrame = 1 :\r\n      this.currentFrame++;\r\n  }\r\n  getFrame1Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row, col: oldCoords[0].col - 1 },\r\n      { row: oldCoords[1].row + 1, col: oldCoords[1].col },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col + 1 },\r\n      { row: oldCoords[3].row - 1, col: oldCoords[3].col + 2 }\r\n    ];\r\n  }\r\n  getFrame2Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row + 2, col: oldCoords[0].col },\r\n      { row: oldCoords[1].row + 1, col: oldCoords[1].col + 1 },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row - 1, col: oldCoords[3].col - 1 }\r\n    ];\r\n  }\r\n  getFrame3Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row - 1, col: oldCoords[0].col + 2 },\r\n      { row: oldCoords[1].row - 2, col: oldCoords[1].col + 1 },\r\n      { row: oldCoords[2].row - 1, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row, col: oldCoords[3].col - 1 }\r\n    ];\r\n  }\r\n  getFrame4Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row - 1, col: oldCoords[0].col - 1 },\r\n      { row: oldCoords[1].row, col: oldCoords[1].col - 2 },\r\n      { row: oldCoords[2].row + 1, col: oldCoords[2].col - 1 },\r\n      { row: oldCoords[3].row + 2, col: oldCoords[3].col }\r\n    ];\r\n  }\r\n  rotate(test) {\r\n    const frame = this.currentFrame;\r\n    let coords = [];\r\n    switch(frame) {\r\n      case 1 : {\r\n        coords = this.getFrame2Coords();\r\n        break;\r\n      }\r\n      case 2 : {\r\n        coords = this.getFrame3Coords();\r\n        break;\r\n      }\r\n      case 3 : {\r\n        coords = this.getFrame4Coords();\r\n        break;\r\n      }\r\n      case 4 : {\r\n        coords = this.getFrame1Coords();\r\n        break;\r\n      }\r\n      default : {\r\n        coords = this.defaultFrame;\r\n      }\r\n    } \r\n    if (test) return coords;\r\n    this.changeFrame();\r\n    this.setCoordinates = coords;\r\n  }\r\n} \r\n\r\nexport default Figure_J;","import Figure from './figure';\r\nimport { figureTypes } from '../globals';\r\n\r\nclass Figure_L extends Figure {\r\n  constructor() {\r\n    super(figureTypes[2]);\r\n    this.defaultFrame = [\r\n      { row: 0, col: this.startPos + 1 },\r\n      { row: 1, col: this.startPos - 1 },\r\n      { row: 1, col: this.startPos },\r\n      { row: 1, col: this.startPos + 1 }\r\n    ];\r\n    this.setCoordinates = this.defaultFrame;\r\n  }\r\n  changeFrame() {\r\n    this.currentFrame === 4 ?\r\n      this.currentFrame = 1 :\r\n      this.currentFrame++;\r\n  }\r\n  getFrame1Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row - 2, col: oldCoords[0].col + 1 },\r\n      { row: oldCoords[1].row + 1, col: oldCoords[1].col },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col + 1 },\r\n      { row: oldCoords[3].row - 1, col: oldCoords[3].col + 2 }\r\n    ];\r\n  }\r\n  getFrame2Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row, col: oldCoords[0].col - 2 },\r\n      { row: oldCoords[1].row + 1, col: oldCoords[1].col + 1 },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row - 1, col: oldCoords[3].col - 1 }\r\n    ];\r\n  }\r\n  getFrame3Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row + 1, col: oldCoords[0].col },\r\n      { row: oldCoords[1].row - 2, col: oldCoords[1].col + 1 },\r\n      { row: oldCoords[2].row - 1, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row, col: oldCoords[3].col - 1 }\r\n    ];\r\n  }\r\n  getFrame4Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row + 1, col: oldCoords[0].col + 1 },\r\n      { row: oldCoords[1].row, col: oldCoords[1].col - 2 },\r\n      { row: oldCoords[2].row + 1, col: oldCoords[2].col - 1 },\r\n      { row: oldCoords[3].row + 2, col: oldCoords[3].col }\r\n    ];\r\n  }\r\n  rotate(test) {\r\n    const frame = this.currentFrame;\r\n    let coords = [];\r\n    switch(frame) {\r\n      case 1 : {\r\n        coords = this.getFrame2Coords();\r\n        break;\r\n      }\r\n      case 2 : {\r\n        coords = this.getFrame3Coords();\r\n        break;\r\n      }\r\n      case 3 : {\r\n        coords = this.getFrame4Coords();\r\n        break;\r\n      }\r\n      case 4 : {\r\n        coords = this.getFrame1Coords();\r\n        break;\r\n      }\r\n      default : {\r\n        coords = this.defaultFrame;\r\n      }\r\n    } \r\n    if (test) return coords;\r\n    this.changeFrame();\r\n    this.setCoordinates = coords;\r\n  }\r\n} \r\n\r\nexport default Figure_L;","import Figure from './figure';\r\nimport { figureTypes } from '../globals';\r\n\r\nclass Figure_O extends Figure {\r\n  constructor() {\r\n    super(figureTypes[3]);\r\n    this.defaultFrame = [\r\n      { row: 0, col: this.startPos - 1 },\r\n      { row: 0, col: this.startPos },\r\n      { row: 1, col: this.startPos - 1 },\r\n      { row: 1, col: this.startPos }\r\n    ];\r\n    this.setCoordinates = this.defaultFrame;\r\n  }\r\n  rotate(test) {\r\n    //console.log('Are you okay?');\r\n    if (test) return this.defaultFrame;\r\n  }\r\n} \r\n\r\nexport default Figure_O;","import Figure from './figure';\r\nimport { figureTypes } from '../globals';\r\n\r\nclass Figure_S extends Figure {\r\n  constructor() {\r\n    super(figureTypes[4]);\r\n    this.defaultFrame = [\r\n      { row: 0, col: this.startPos },\r\n      { row: 0, col: this.startPos + 1 },\r\n      { row: 1, col: this.startPos - 1 },\r\n      { row: 1, col: this.startPos }\r\n    ];\r\n    this.setCoordinates = this.defaultFrame;\r\n  }\r\n  changeFrame() {\r\n    this.currentFrame === 2 ?\r\n      this.currentFrame = 1 :\r\n      this.currentFrame++;\r\n  }\r\n  getFrame1Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row - 1, col: oldCoords[0].col + 1 },\r\n      { row: oldCoords[1].row, col: oldCoords[1].col + 2 },\r\n      { row: oldCoords[2].row - 1, col: oldCoords[2].col - 1 },\r\n      { row: oldCoords[3].row, col: oldCoords[3].col }\r\n    ];\r\n  }\r\n  getFrame2Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row + 1, col: oldCoords[0].col - 1 },\r\n      { row: oldCoords[1].row, col: oldCoords[1].col - 2 },\r\n      { row: oldCoords[2].row + 1, col: oldCoords[2].col + 1 },\r\n      { row: oldCoords[3].row, col: oldCoords[3].col }\r\n    ];\r\n  }\r\n  rotate(test) {\r\n    const frame = this.currentFrame;\r\n    let coords = [];\r\n    switch(frame) {\r\n      case 1 : {\r\n        coords = this.getFrame2Coords();\r\n        break;\r\n      }\r\n      case 2 : {\r\n        coords = this.getFrame1Coords();\r\n        break;\r\n      }\r\n      default : {\r\n        coords = this.defaultFrame;\r\n      }\r\n    } \r\n    if (test) return coords;\r\n    this.changeFrame();\r\n    this.setCoordinates = coords;\r\n  }\r\n} \r\n\r\nexport default Figure_S;","import Figure from './figure';\r\nimport { figureTypes } from '../globals';\r\n\r\nclass Figure_T extends Figure {\r\n  constructor() {\r\n    super(figureTypes[5]);\r\n    this.defaultFrame = [\r\n      { row: 0, col: this.startPos },\r\n      { row: 1, col: this.startPos - 1 },\r\n      { row: 1, col: this.startPos },\r\n      { row: 1, col: this.startPos + 1 }\r\n    ];\r\n    this.setCoordinates = this.defaultFrame;\r\n  }\r\n  changeFrame() {\r\n    this.currentFrame === 4 ?\r\n      this.currentFrame = 1 :\r\n      this.currentFrame++;\r\n  }\r\n  getFrame1Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row - 1, col: oldCoords[0].col - 1 },\r\n      { row: oldCoords[1].row - 1, col: oldCoords[1].col - 1 },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row + 1, col: oldCoords[3].col + 1 }\r\n    ];\r\n  }\r\n  getFrame2Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row + 1, col: oldCoords[0].col - 1 },\r\n      { row: oldCoords[1].row + 1, col: oldCoords[1].col + 1 },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row - 1, col: oldCoords[3].col - 1 }\r\n    ];\r\n  }\r\n  getFrame3Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row + 1, col: oldCoords[0].col + 1 },\r\n      { row: oldCoords[1].row - 1, col: oldCoords[1].col - 1 },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row + 1, col: oldCoords[3].col + 1 }\r\n    ];\r\n  }\r\n  getFrame4Coords() {\r\n    const oldCoords = this.getCoordinates;\r\n    return [\r\n      { row: oldCoords[0].row - 1, col: oldCoords[0].col + 1 },\r\n      { row: oldCoords[1].row + 1, col: oldCoords[1].col + 1 },\r\n      { row: oldCoords[2].row, col: oldCoords[2].col },\r\n      { row: oldCoords[3].row - 1, col: oldCoords[3].col - 1 }\r\n    ];\r\n  }\r\n  rotate(test) {\r\n    const frame = this.currentFrame;\r\n    let coords = [];\r\n    switch(frame) {\r\n      case 1 : {\r\n        coords = this.getFrame2Coords();\r\n        break;\r\n      }\r\n      case 2 : {\r\n        coords = this.getFrame3Coords();\r\n        break;\r\n      }\r\n      case 3 : {\r\n        coords = this.getFrame4Coords();\r\n        break;\r\n      }\r\n      case 4 : {\r\n        coords = this.getFrame1Coords();\r\n        break;\r\n      }\r\n      default : {\r\n        coords = this.defaultFrame;\r\n      }\r\n    } \r\n    if (test) return coords;\r\n    this.changeFrame();\r\n    this.setCoordinates = coords;\r\n  }\r\n} \r\n\r\nexport default Figure_T;","import figureClasses from './figures/index';\r\n\r\nexport function debounce(fn, delay) {\r\n  let timerId;\r\n  return function(...args) {\r\n    if (timerId) {\r\n      clearTimeout(timerId);\r\n    }\r\n    timerId = setTimeout(() => {\r\n      fn(...args);\r\n      timerId = null;\r\n    }, delay);\r\n  }\r\n}\r\nexport function pickRandomFigure() {\r\n  return figureClasses[Math.floor(Math.random() * figureClasses.length)];\r\n}\r\nexport function setCellProps(value, modifiers) {\r\n  return { value, modifiers };\r\n}","export function renderCell({ value, modifiers }) {\r\n  const cellEl = document.createElement('DIV');\r\n  cellEl.classList.add('cell');\r\n  if (value === 1) cellEl.classList.add('cell--occupied');\r\n  if (modifiers) {\r\n    cellEl.classList.add(modifiers.className);\r\n  }\r\n  return cellEl;\r\n}\r\nexport function renderRow(row) {\r\n  const rowEl = document.createElement('DIV');\r\n  rowEl.classList.add('row');\r\n  for (let i = 0; i < row.length; i++) {\r\n    let cell = renderCell(row[i]);\r\n    rowEl.appendChild(cell);\r\n  }\r\n  return rowEl;\r\n}\r\nexport function renderGame(array) {\r\n  const gameEl = document.getElementById('game');\r\n  clearElement(gameEl);\r\n  for (let i = 0; i < array.length; i++) {\r\n    let row = renderRow(array[i]);\r\n    gameEl.appendChild(row);\r\n  }\r\n}\r\nexport function renderNextFigure(array) {\r\n  const nextEl = document.getElementById('next');\r\n  clearElement(nextEl);\r\n  for (let i = 0; i < array.length; i++) {\r\n    let row = renderRow(array[i]);\r\n    nextEl.appendChild(row);\r\n  }\r\n}\r\nexport function renderScore(score) {\r\n  const scoreEl = document.getElementById('score');\r\n  scoreEl.innerHTML = score;\r\n}\r\nexport function renderLevel(level) {\r\n  const levelEl = document.getElementById('level');\r\n  levelEl.innerHTML = level;\r\n}\r\nexport function renderPause(pause) {\r\n  const pauseEl = document.getElementById('pause');\r\n  pauseEl.innerHTML = pause ? 'paused' : '';\r\n}\r\nexport function clearElement(element) {\r\n  element.innerHTML = '';\r\n}","import { renderGame, renderScore, renderLevel } from './render';\r\nimport { \r\n  gameWidth, scores, levelingUpBase, \r\n  score, addScore, level, increaseLevel \r\n} from './globals';\r\n\r\nexport function generateInitialCells(height, width) {\r\n  let array = [];\r\n  for (let i = 0; i < height; i++) {\r\n    let row = [];\r\n    for (let j = 0; j < width; j++) {\r\n      row.push({\r\n        value: 0,\r\n        modifiers: null\r\n      });\r\n    }\r\n    array.push(row);\r\n  }\r\n  return array;\r\n}\r\n\r\nexport function updateCells(coords, grid, cell, rerender = true) {\r\n  coords.forEach(({ row, col }) => grid[row][col] = cell);\r\n  if (rerender) renderGame(grid);\r\n  return grid;\r\n}\r\n\r\nexport function checkTopCells(coords, grid) {\r\n  let topRow = Math.min.apply(null, coords.map(pair => pair.row));\r\n  return Boolean(grid[topRow]); \r\n}\r\nexport function checkBottomCells(coords, grid, range = 1) {\r\n  let bottomRow = Math.max.apply(null, coords.map(pair => pair.row)) + range;\r\n  if (grid[bottomRow]) {\r\n    let columns = [...new Set(coords.map(pair => pair.col))];\r\n    return !columns.some(col => {\r\n      let row = Math.max.apply(null, coords.filter(pair => pair.col === col).map(pair => pair.row)) + range;\r\n      return grid[row][col] ? Boolean(grid[row][col].value) : false;\r\n    });\r\n  }\r\n  return false;\r\n}\r\nexport function checkLeftCells(coords, grid, range = 1) {\r\n  let leftColumn = Math.min.apply(null, coords.map(pair => pair.col)) - range;\r\n  if (grid[0][leftColumn] !== undefined) {\r\n    let rows = [...new Set(coords.map(pair => pair.row))];\r\n    return !rows.some(row => {\r\n      let col = Math.min.apply(null, coords.filter(pair => pair.row === row).map(pair => pair.col)) - range;\r\n      return grid[row][col] ? Boolean(grid[row][col].value) : false;\r\n    });\r\n  }\r\n  return false;\r\n}\r\nexport function checkRightCells(coords, grid, range = 1) {\r\n  let rightColumn = Math.max.apply(null, coords.map(pair => pair.col)) + range;\r\n  if (grid[0][rightColumn] !== undefined) {\r\n    let rows = [...new Set(coords.map(pair => pair.row))];\r\n    return !rows.some(row => {\r\n      let col = Math.max.apply(null, coords.filter(pair => pair.row === row).map(pair => pair.col)) + range;\r\n      return grid[row][col] ? Boolean(grid[row][col].value) : false;\r\n    });\r\n  }\r\n  return false;\r\n}\r\nexport function checkSpawnCells(coords, grid) {\r\n  return !coords.some(({ row, col }) => grid[row][col].value === 1);\r\n}\r\nexport function addEmptyRows(number, grid) {\r\n  let blankRow = new Array(gameWidth);\r\n  blankRow.fill({\r\n    value: 0,\r\n    modifiers: null\r\n  });\r\n  for (let i = 0; i < number; i++) {\r\n    grid.unshift(blankRow.slice(0));\r\n  }\r\n}\r\nexport function deleteRows(rows, grid) {\r\n  rows.forEach(row => grid.splice(row, 1));\r\n}\r\nexport function clearLines(grid) {\r\n  let linesToClear = [];\r\n  grid.forEach((row, i) => {\r\n    if (row.every(cell => cell.value === 1)) linesToClear.push(i);\r\n  });\r\n  linesToClear.sort((a, b) => b - a);\r\n  if (linesToClear.length !== 0) {\r\n    deleteRows(linesToClear, grid);\r\n    addEmptyRows(linesToClear.length, grid);\r\n    addScore(scores[linesToClear.length - 1]);\r\n    if (score >= levelingUpBase * (level ** 2)) {\r\n      increaseLevel();\r\n      renderLevel(level);\r\n    }\r\n    renderScore(score);\r\n  }\r\n}","import { checkBottomCells, checkTopCells, checkLeftCells, checkRightCells, updateCells } from './grid';\r\nimport { moveFigure, rotateFigure, loadGameState } from './index';\r\nimport { setPause, pause, loopRate } from './globals';\r\nimport { debounce, setCellProps } from './utils';\r\nimport { renderPause } from './render';\r\n\r\nexport function userActions(event, figure, grid) {\r\n  if (figure.stop) return;\r\n  switch (event.keyCode) {\r\n    case 37 : {\r\n      if (!checkLeftCells(figure.getCoordinates, grid)) return;\r\n      moveFigure(figure, 'LEFT', grid);\r\n      break;\r\n    }\r\n    case 38 : {\r\n      const nextCoords = figure.rotate(true);\r\n      updateCells(figure.getCoordinates, grid, setCellProps(0, null), false);\r\n      if (checkTopCells(nextCoords, grid) &&\r\n          checkBottomCells(nextCoords, grid) && \r\n          checkLeftCells(nextCoords, grid, 0) &&\r\n          checkRightCells(nextCoords, grid, 0)) {\r\n            rotateFigure(figure, grid);\r\n      } else {\r\n        updateCells(figure.getCoordinates, grid, setCellProps(1, { className: figure.className }), false);\r\n      }\r\n      break;\r\n    }\r\n    case 39 : {\r\n      if (!checkRightCells(figure.getCoordinates, grid)) return;\r\n      moveFigure(figure, 'RIGHT', grid);\r\n      break;\r\n    }\r\n    case 40 : {\r\n      if (!checkBottomCells(figure.getCoordinates, grid)) return;\r\n      moveFigure(figure, 'DOWN', grid);\r\n      break;\r\n    }\r\n    case 32: {\r\n      while (checkBottomCells(figure.getCoordinates, grid)) {\r\n        moveFigure(figure, 'DOWN', grid);\r\n      }\r\n      break;\r\n    }\r\n  }\r\n}\r\nexport const globalActions = debounce(function (event) {\r\n  switch (event.code) {\r\n    case 'KeyP': {\r\n      setPause(!pause);\r\n      renderPause(pause);\r\n      if (!pause) loadGameState();\r\n      break;\r\n    }\r\n  }\r\n}, loopRate);","import '../css/style.css';\r\nimport { \r\n  gameHeight, gameWidth, nextFieldHeight, nextFieldWidth,\r\n  movementSpeeds, loopRate, saveGameState, gameState, pause, level, \r\n  score, setLevel, setScore\r\n} from './globals';\r\nimport { pickRandomFigure, setCellProps } from './utils';\r\nimport { userActions, globalActions } from './event_handlers';\r\nimport { renderGame, renderNextFigure, renderScore, renderLevel } from './render';\r\nimport { \r\n  generateInitialCells, updateCells, checkBottomCells, \r\n  clearLines, checkSpawnCells \r\n} from './grid';\r\n\r\nfunction spawnFigure(FigureClass) {\r\n  let figure = new FigureClass();\r\n  return figure;\r\n}\r\nexport function moveFigure(figure, dir, grid) {\r\n  updateCells(figure.getCoordinates, grid, setCellProps(0, null));\r\n  figure.move(dir);\r\n  updateCells(figure.getCoordinates, grid, setCellProps(1, { className: figure.className }));\r\n}\r\nexport function rotateFigure(figure, grid) {\r\n  figure.rotate();\r\n  updateCells(figure.getCoordinates, grid, setCellProps(1, { className: figure.className }));\r\n}\r\nfunction showNextFigure(figure) {\r\n  let grid = generateInitialCells(nextFieldHeight, nextFieldWidth);\r\n  let coords = figure.getCoordinates.map(({ row, col }) => ({\r\n    row: row + 1,\r\n    col: Math.floor(col/(10/nextFieldWidth)) \r\n  }));\r\n  grid = updateCells(coords, grid, setCellProps(1, { className: figure.className }), false);\r\n  renderNextFigure(grid);\r\n}\r\nexport function loadGameState() {\r\n  gameLoop(gameState.grid, { figure: gameState.figure, nextFigure: gameState.nextFigure });\r\n}\r\nfunction initGame() {\r\n  let gameGrid = generateInitialCells(gameHeight, gameWidth);\r\n  renderGame(gameGrid);\r\n  gameLoop(gameGrid);\r\n  document.addEventListener('keypress', globalActions);\r\n}\r\nfunction endGame() {\r\n  let restart = confirm(\r\n    'Game over! Your score is ' + score + ' points. ' +\r\n    'Would you like to start a new game?'\r\n  );\r\n  if (restart) {\r\n    setScore(0);\r\n    renderScore(score);\r\n    setLevel(1);\r\n    renderLevel(level);\r\n    initGame();\r\n  }\r\n}\r\n\r\nfunction figureLoop(figure, speed, grid) {\r\n  let interval = setInterval(() => {\r\n    if (pause) {\r\n      clearInterval(interval);\r\n      return;\r\n    }\r\n    if (!checkBottomCells(figure.getCoordinates, grid)) {\r\n      clearLines(grid);\r\n      figure.stopMoving();\r\n      clearInterval(interval);\r\n      return;\r\n    }\r\n    moveFigure(figure, 'DOWN', grid);\r\n  }, speed);\r\n}\r\n\r\nfunction gameLoop(grid, gameState) {\r\n  let figure;\r\n  let nextFigure;\r\n  if (gameState) {\r\n    figure = gameState.figure;\r\n    nextFigure = gameState.nextFigure;\r\n  } else {\r\n    figure = spawnFigure(pickRandomFigure());\r\n    nextFigure = spawnFigure(pickRandomFigure());\r\n  }\r\n  updateCells(figure.getCoordinates, grid, setCellProps(1, { className: figure.className }));\r\n  showNextFigure(nextFigure);\r\n  function listenerWrapper(e) {\r\n    userActions(e, figure, grid);\r\n  }\r\n  document.addEventListener('keydown', listenerWrapper);\r\n  figureLoop(figure, movementSpeeds[level-1], grid);\r\n  let interval = setInterval(() => {\r\n    if (figure.stop) {\r\n      figure = nextFigure;\r\n      nextFigure = spawnFigure(pickRandomFigure());\r\n      if (!checkSpawnCells(figure.getCoordinates, grid)) {\r\n        clearInterval(interval);\r\n        document.removeEventListener('keydown', listenerWrapper);\r\n        document.removeEventListener('keypress', globalActions);\r\n        endGame();\r\n        return;\r\n      }\r\n      updateCells(figure.getCoordinates, grid, setCellProps(1, { className: figure.className }));\r\n      showNextFigure(nextFigure);\r\n      figureLoop(figure, movementSpeeds[level-1], grid);\r\n    }\r\n    if (pause) {\r\n      clearInterval(interval);\r\n      document.removeEventListener('keydown', listenerWrapper);\r\n      saveGameState({ grid, figure, nextFigure });\r\n      return;\r\n    }\r\n  }, loopRate);\r\n}\r\n\r\ninitGame();"],"sourceRoot":""}